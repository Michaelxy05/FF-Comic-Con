<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>FriendFinder</title>

  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

  <!-- Bootswatch -->
  <link rel="stylesheet" href="https://bootswatch.com/4/superhero/bootstrap.min.css">

  <!-- Font Awesome Glyphicons -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

  <!-- Chosen -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

  <!-- Local CSS Link -->
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">

</head>

<body>

  <div class="container">

    <h2>Survey Questions</h2>
    <hr>

    <h3><strong>About You</strong></h3>
    <h4>Name (Required)</h4>
    <input type="text" id="name" class="form-control" required>

    <h4>Link to Photo Image (Required)</h4>
    <input type="text" id="photo" class="form-control" required>

    <hr>

    <h3><strong>Question 1</strong></h3>
    <h4>Marvel Cinematic is better than DC Cinematic. (1 Strongly Disagree, 5 Strongly Agree) *</h4>
    <form class="chosen-form" id="question1">
      <input type="radio" name="surveyNum1" value="1" style="margin-left: 20px" />1
      <input type="radio" name="surveyNum1" value="2" style="margin-left: 20px" />2
      <input type="radio" name="surveyNum1" value="3" style="margin-left: 20px" />3
      <input type="radio" name="surveyNum1" value="4" style="margin-left: 20px" />4
      <input type="radio" name="surveyNum1" value="5" style="margin-left: 20px" />5 
    </form>

    <h3><strong>Question 2</strong></h3>
    <h4>Goku is stronger than Superman. (1 Strongly Disagree, 5 Strongly Agree) *</h4>
    <form class="chosen-form" id="question2">
      <input type="radio" name="surveyNum2" value="1" style="margin-left: 20px" />1
      <input type="radio" name="surveyNum2" value="2" style="margin-left: 20px" />2
      <input type="radio" name="surveyNum2" value="3" style="margin-left: 20px" />3
      <input type="radio" name="surveyNum2" value="4" style="margin-left: 20px" />4
      <input type="radio" name="surveyNum2" value="5" style="margin-left: 20px" />5 
    </form>


    <h3><strong>Question 3</strong></h3>
    <h4>Sam and Dean Winchester could easily end the whole Stranger Things Series in less than 5 Episodes. (1 Strongly Disagree, 5 Strongly Agree) *</h4>
    <form class="chosen-form" id="question3">
      <input type="radio" name="surveyNum3" value="1" style="margin-left: 20px" />1
      <input type="radio" name="surveyNum3" value="2" style="margin-left: 20px" />2
      <input type="radio" name="surveyNum3" value="3" style="margin-left: 20px" />3
      <input type="radio" name="surveyNum3" value="4" style="margin-left: 20px" />4
      <input type="radio" name="surveyNum3" value="5" style="margin-left: 20px" />5 
    </form>


    <h3><strong>Question 4</strong></h3>
    <h4>One Punch Man Saitama would beat Thanos. (1 Strongly Disagree, 5 Strongly Agree) *</h4>
    <form class="chosen-form" id="question4">
      <input type="radio" name="surveyNum4" value="1" style="margin-left: 20px" />1
      <input type="radio" name="surveyNum4" value="2" style="margin-left: 20px" />2
      <input type="radio" name="surveyNum4" value="3" style="margin-left: 20px" />3
      <input type="radio" name="surveyNum4" value="4" style="margin-left: 20px" />4
      <input type="radio" name="surveyNum4" value="5" style="margin-left: 20px" />5 
    </form>


    <h3><strong>Question 5</strong></h3>
    <h4>The only Pokemons are the first 151. (1 Strongly Disagree, 5 Strongly Agree) *</h4>
    <form class="chosen-form" id="question5">
      <input type="radio" name="surveyNum5" value="1" style="margin-left: 20px" />1
      <input type="radio" name="surveyNum5" value="2" style="margin-left: 20px" />2
      <input type="radio" name="surveyNum5" value="3" style="margin-left: 20px" />3
      <input type="radio" name="surveyNum5" value="4" style="margin-left: 20px" />4
      <input type="radio" name="surveyNum5" value="5" style="margin-left: 20px" />5 
    </form>


    <h3><strong>Question 6</strong></h3>
    <h4>Jon Snow will marry Daenerys Targaryen. (1 Strongly Disagree, 5 Strongly Agree) *</h4>
    <form class="chosen-form" id="question6">
      <input type="radio" name="surveyNum6" value="1" style="margin-left: 20px" />1
      <input type="radio" name="surveyNum6" value="2" style="margin-left: 20px" />2
      <input type="radio" name="surveyNum6" value="3" style="margin-left: 20px" />3
      <input type="radio" name="surveyNum6" value="4" style="margin-left: 20px" />4
      <input type="radio" name="surveyNum6" value="5" style="margin-left: 20px" />5 
    </form>


    <h3><strong>Question 7</strong></h3>
    <h4>Walter White in Breaking Bad survived. (1 Strongly Disagree, 5 Strongly Agree) *</h4>
    <form class="chosen-form" id="question7">
      <input type="radio" name="surveyNum7" value="1" style="margin-left: 20px" />1
      <input type="radio" name="surveyNum7" value="2" style="margin-left: 20px" />2
      <input type="radio" name="surveyNum7" value="3" style="margin-left: 20px" />3
      <input type="radio" name="surveyNum7" value="4" style="margin-left: 20px" />4
      <input type="radio" name="surveyNum7" value="5" style="margin-left: 20px" />5 
    </form>

    <h3><strong>Question 8</strong></h3>
    <h4>At the end of Inception, Dom Cobb (Leonardo DiCaprio) was still stuck in the dream world. (1 Strongly Disagree, 5 Strongly Agree) *</h4>
    <form class="chosen-form" id="question8">
      <input type="radio" name="surveyNum8" value="1" style="margin-left: 20px" />1
      <input type="radio" name="surveyNum8" value="2" style="margin-left: 20px" />2
      <input type="radio" name="surveyNum8" value="3" style="margin-left: 20px" />3
      <input type="radio" name="surveyNum8" value="4" style="margin-left: 20px" />4
      <input type="radio" name="surveyNum8" value="5" style="margin-left: 20px" />5 
    </form>

    <h3><strong>Question 9</strong></h3>
    <h4>Boba Fett survived Sarlacc pit. (1 Strongly Disagree, 5 Strongly Agree) *</h4>
    <form class="chosen-form" id="question9">
      <input type="radio" name="surveyNum9" value="1" style="margin-left: 20px" />1
      <input type="radio" name="surveyNum9" value="2" style="margin-left: 20px" />2
      <input type="radio" name="surveyNum9" value="3" style="margin-left: 20px" />3
      <input type="radio" name="surveyNum9" value="4" style="margin-left: 20px" />4
      <input type="radio" name="surveyNum9" value="5" style="margin-left: 20px" />5 
    </form>

    <h3><strong>Question 10</strong></h3>
    <h4>X-Men will eventually join the Marvel Cinematic Universe. (1 Strongly Disagree, 5 Strongly Agree) *</h4>
    <form class="chosen-form" id="question10">
      <input type="radio" name="surveyNumX" value="1" style="margin-left: 20px" />1
      <input type="radio" name="surveyNumX" value="2" style="margin-left: 20px" />2
      <input type="radio" name="surveyNumX" value="3" style="margin-left: 20px" />3
      <input type="radio" name="surveyNumX" value="4" style="margin-left: 20px" />4
      <input type="radio" name="surveyNumX" value="5" style="margin-left: 20px" />5 
    </form>

    <br>
    <br>

    <!-- Submit Button -->
    <button type="submit" class="btn btn-primary btn-lg btn-block" id="submitBtn" value="getValue"><i class="fa fa-check-circle"
        aria-hidden="true"></i>
      Submit</button>

    <hr>
    <footer class="footer">
      <div class="container">
        <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/Michaelxy05/FF-Comic-Con">GitHub Repo</a></p>
      </div>
    </footer>

  </div>

  <!-- Modal -->
  <div id="results-modal" class="modal fade" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h2 class="modal-title"><strong>Best Match</strong></h2>
        </div>
        <div class="modal-body">
          <h2 id="match-name"></h2>
          <img id="match-img" src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg" alt="">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>

    </div>
  </div>

  <script type="text/javascript">
    $("#submitBtn").on("click", function (event) {
      event.preventDefault();


      // Form validation
      function validateForm() {
        var isValid = true;
        $(".form-control").each(function() {
          if ($(this).val() === "") {
            isValid = false;
          }
        });

        $(".chosen-select").each(function() {

          if ($(this).val() === "") {
            isValid = false;
          }
        });
        return isValid;
      }

      // If all required fields are filled
      if (validateForm()) {

        //=========================================================
      //   var selValue = $('input[name=surveyNum]:checked').val();
      // console.log(selValue);
        //=========================================================

        var newUser = {
          name: $("#name").val().trim(),
          photo: $("#photo").val().trim(),
          scores: [
            $("input[name=surveyNum1]:checked").val(),
            $("input[name=surveyNum2]:checked").val(),
            $("input[name=surveyNum3]:checked").val(),
            $("input[name=surveyNum4]:checked").val(),
            $("input[name=surveyNum5]:checked").val(),
            $("input[name=surveyNum6]:checked").val(),
            $("input[name=surveyNum7]:checked").val(),
            $("input[name=surveyNum8]:checked").val(),
            $("input[name=surveyNum9]:checked").val(),
            $("input[name=surveyNumX]:checked").val()
          ]
        };
        
        console.log(newUser.scores);

        var currentURL = window.location.origin;
        // Ajax call for receiving response after POST req
        $.post(currentURL + "/api/friends", newUser, function (data) {
          $("#match-name").text(data.name);
          $("#match-img").attr("src", data.photo);
          $("#results-modal").modal("toggle");
        });
      } else {
        // If a required field is missing, show alert
        alert("Survey is incomplete!");
      }
    });
  </script>

</body>

</html>